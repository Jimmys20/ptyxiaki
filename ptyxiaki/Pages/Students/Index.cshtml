@page
@model ptyxiaki.Pages.Students.IndexModel

@{
  ViewData["Title"] = "Φοιτητές";
}

<h1>@ViewData["Title"]</h1>

<table id="students" class="table table-striped table-bordered dt-responsive nowrap" style="width: 100%;">
  <thead>
    <tr>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].fullName)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].fatherName)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].registrationNumber)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].email)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].semester)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].average)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].credits)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].progressFactor)
      </th>
    </tr>
  </thead>
  @*<tfoot>
      <tr>
        <th>
          @Html.DisplayNameFor(model => model.Student[0].fullName)
        </th>
        <th>
          @Html.DisplayNameFor(model => model.Student[0].registrationNumber)
        </th>
        <th>
          @Html.DisplayNameFor(model => model.Student[0].semester)
        </th>
      </tr>
    </tfoot>*@
</table>

@section Scripts {
  <script>
    $(document).ready(function () {
      $('#students').DataTable({
        ajax: {
          type: 'POST',
          url: '/api/students'
        },
        columns: [{
          data: 'fullName',
          render: function (data, type, row, meta) {
            return `<a href="/Students/Details?id=${row.studentId}">${data}</a>`;
          }
        }, {
          data: 'fatherName'
        }, {
          data: 'registrationNumber'
        }, {
          data: 'email',
          render: function (data, type, row, meta) {
            return `<a href="mailto:${data}">${data}</a>`;
          }
        }, {
          data: 'semester'
        }, {
          data: 'average'
        }, {
          data: 'credits'
        }, {
          data: 'progressFactor'
        }],
        language: {
          url: 'https://cdn.datatables.net/plug-ins/1.10.19/i18n/Greek.json'
        },
        orderMulti: false,
        serverSide: true,
        stateDuration: -1,
        stateSave: true
      });
    });
  </script>
}
