@page
@model ptyxiaki.Pages.Students.IndexModel

@{
  ViewData["Title"] = "Φοιτητές";
}

<h1>@ViewData["Title"]</h1>

<table id="students" class="table table-striped table-bordered dt-responsive nowrap" style="width: 100%;">
  <thead>
    <tr>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].lastName)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].firstName)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].registrationNumber)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].semester)
      </th>
      <th></th>
    </tr>
  </thead>
  <tfoot>
    <tr>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].lastName)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].firstName)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].registrationNumber)
      </th>
      <th>
        @Html.DisplayNameFor(model => model.Student[0].semester)
      </th>
      <th></th>
    </tr>
  </tfoot>
</table>

@section Scripts {
  <script>
    $(document).ready(function () {
      $('#students').DataTable({
        ajax: {
          type: 'POST',
          url: '/api/students'
        },
        columns: [{
          data: 'firstName',
          name: 'firstName'
        }, {
          data: 'lastName',
          name: 'lastName'
        }, {
          data: 'registrationNumber',
          name: 'registrationNumber'
        }, {
          data: 'semester',
          name: 'semester'
        }, {
          data: 'studentId',
          orderable: false,
          render: function (data, type, row, meta) {
            return `<a href="/Students/Details?id=${data}">Λεπτομέρειες</a>`;
          }
        }],
        language: {
          url: 'https://cdn.datatables.net/plug-ins/1.10.19/i18n/Greek.json'
        },
        serverSide: true,
        stateDuration: -1,
        stateSave: true
      });
    });
  </script>
}
